<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="board">
	<!-- 관리자 로그인 확인 by 박권익 -->
	<select id="login" resultType="java.lang.Integer">
		select adm_no
		from adm_tb where
		adm_id = #{adm_id} and adm_pwd = #{adm_pwd}
	</select>

	<!-- # 공지사항 관련 -->

	<!-- 공지사항List by 박권익 -->
	<select id="selectNoti" resultType="notiVo">
		select noti_num, noti_title,
		noti_date from noti_tb
	</select>

	<!-- 공지사항 상세보기 by 박권익 -->
	<select id="selectNoti" resultType="notiVo">
		select * from noti_tb where
		noti_num = #{noti_num}
	</select>

	<!-- 공지사항 등록 by 박권익 -->
	<insert id="insertNoti">
		insert into noti_tb values(seq_noti.nextval,
		#{noti_title}, #{noti_content}, #{noti_file}, systimestamp)
	</insert>

	<!-- 공지사항 수정 by 박권익 -->
	<update id="updateNoti">
		update noti_tb set noti_title = #{noti_title},
		noti_content = #{noti_content}, noti_file = #{noti_file}, noti_date =
		systimestamp where noti_num = #{noti_num}
	</update>

	<!-- 공지사항 삭제 by 박권익 -->
	<delete id="deleteNoti">
		delete noti_tb where noti_num = #{noti_num}
	</delete>

	<!-- # 도움말 관련 -->

	<!-- 도움말List by 박권익 -->
	<select id="selectFaq" resultType="faqVo">
		select faq_num, faq_title,
		faq_category from faq_tb
	</select>

	<!-- 도움말 상세보기 by 박권익 -->
	<select id="selectFaq" resultType="faqVo">
		select * from faq_tb where
		faq_num = #{faq_num}
	</select>

	<!-- 도움말 등록 by 박권익 -->
	<insert id="insertFaq">
		insert into faq_tb values(seq_faq.nextval,
		#{faq_title}, #{faq_content], #{faq_category}, #{faq_file})
	</insert>

	<!-- 도움말 수정 by 박권익 -->
	<update id="updateFaq">
		update faq_tb set faq_title = #{faq_title},
		faq_content = #{faq_content}, faq_category = #{faq_category}, faq_file
		= #{faq_file} where faq_num = #{faq_num}
	</update>

	<!-- 도움말 삭제 by 박권익 -->
	<delete id="deleteFaq">
		delete faq_tb where faq_num = #{faq_num}
	</delete>
	
	<!-- # 기획전 관련 -->

	<!-- 기획전List by 박권익 -->
	<select id="selectEvent" resultType="eventVo">
		select event_num,
		event_title from event_tb
	</select>

	<!-- 기획전 상세보기 by 박권익 -->
	<select id="selectEvent" resultType="eventVo">
		select * from event_tb where
		event_num = #{event_num}
	</select>

	<!-- 기획전 등록 by 박권익 -->
	<insert id="insertEvent">
		insert into event_tb values(seq_event.nextval,
		#{event_title}, #{event_content}, ${event_file}, ${event_start},
		${event_end})
	</insert>

	<!-- 기획전 수정 by 박권익 -->
	<update id="updateEvent">
		update event_tb set event_title = #{event_title},
		event_content = #{event_content}, event_file = #{event_file},
		event_start = #{event_start}, event_end = #{event_end} where event_num
		= #{event_num}
	</update>

	<!-- 기획전 삭제 by 박권익 -->
	<delete id="deleteEvent">
		delete event_tb where event_num = #{event_num}
	</delete>

	<!-- # 1대1문의 관련 -->

	<!-- 1대1문의List by 박권익 -->
	<select id="selectAdmQue" resultType="admQueVo">
		select adm_que_num,
		adm_que_writer, adm_que_title, adm_que_date,
		adm_que_check from
		adm_que_tb
	</select>

	<!-- 1대1문의 상세보기 by 박권익 -->
	<select id="selectAdmQue" resultType="admQueVo">
		select * from adm_que_tb
		where adm_que_num = #{adm_que_num}
	</select>

	<!-- 1대1문의 삭제 by 박권익 -->
	<delete id="deleteEvent">
		delete adm_que_tb where adm_que_num = #{adm_que_num}
	</delete>

	<!-- 1대1문의 답변등록 by 박권익 -->
	<!-- 후에 테이블 컬럼 수정 작업 시 답변번호 컬럼을 삭제하고 문의번호를 기본키이면서 외래키로 설정하는건 어떨지? -->
	<insert id="insertAdmAns">
		insert into adm_ans_tb values(seq_adm_ans.nextval,
		#{adm_que_num}, #{user_num}, #{adm_ans_title}, #{adm_ans_content},
		#{adm_ans_file}, systimestamp);
	</insert>
	
	<!-- 1대1문의 답변등록 후 답변여부 수정 -->
	<update id="">
		update adm_que_tb set adm_que_check = 'Y' where adm_que_num = #{adm_que_num}
	</update>
</mapper>